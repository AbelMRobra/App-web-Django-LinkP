{% extends "users/inicio2.html" %}
{% load apptags_extras %}

{% load static %}
{% load humanize %}


{% block content %}

<div class="container-fluid r-aside">

    <div class="row page-titles">
        <div class="col-md-5 align-self-center">
            <h3 class="text-themecolor">Cambiar contraseña</h3>
        </div>

        <div class="col-md-7 align-self-center">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="{% url 'Inicio' %}">Inicio</a></li>
                <li class="breadcrumb-item"><a href="{% url 'Guia' %}">Guia</a></li>
                <li class="breadcrumb-item">Cambiar contraseña</li>
            </ol>
        </div>
    </div>
</div>


<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-body row">
                <div class="col-12 justify-content-center">

                    <h4>
                        Modificar contraseña</h4>

                    {% if mensaje == 0 %}

                    <form role="form" enctype="multipart/form-data" action="" method="POST" id="upload-image-form"
                        style="margin: 30px;">
                        {% csrf_token %}

                        <div style="margin: 5px">
                            <div style="display: inline-block; margin: 10px; width: 200px;">
                                <label for="password">
                                    <h6>Contraseña nueva:</h6>
                                </label>
                            </div>
                            <div style="display: inline-block; margin: 10px; ">
                                <input id="password" name="password" type="password" class="form-control form-control"
                                    style="width: 300px;" minlength="8" required="true">
                            </div>
                        </div>
                        
                        <div style="margin: 5px">
                            <div style="display: inline-block; margin: 10px; width: 200px;">
                                <label for="checkpassword">
                                    <h6>Confirmar contraseña:</h6>
                                </label>
                            </div>
                            <div style="display: inline-block; margin: 10px; ">
                                <input id="checkpassword" name="checkpassword" type="password" class="form-control form-control"
                                style="width: 300px;" minlength="8" required="true" onkeyup="checkPassword()">
                            </div>
                            <div class="mx-2 mb-2" >
                                <p class="text-danger"  id="passtext"></p>
                            </div>
                        </div>
                        
                        <button id="submit" type="submit" class="btn btn-primary mx-2" disabled>Modificar</button>
                        
                        
                        {{ form.as_p }}
                    </form>

                    {% else %}
                    
                    <div class="row">
                        <div class="col-12 d-flex justify-content-center">
                            <img src="{% static 'img/aceptado.png' %}" class="img-fluid" alt="..."
                                style="max-width:30px;width:auto;">

                        </div>

                        <div class="col d-flex justify-content-center text-success mt-2">
                            <h4>Contraseña
                                    modificada exitosamente!</h4>
                        </div>
                    </div>


                    {% endif %}
                    
                </div>
            </div>
        </div>
    </div>
</div>

<script>

function checkPassword() {
    if (document.getElementById('password').value == document.getElementById('checkpassword').value) {
        document.getElementById('submit').disabled = false;
        document.getElementById('passtext').innerHTML = ""
    }
    else {
        document.getElementById('submit').disabled = true;
        document.getElementById('passtext').innerHTML = "La contraseña no coincide!"
    }
}

</script>


{% endblock %}