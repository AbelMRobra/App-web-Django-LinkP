{% extends "users/inicio.html" %}

{% load static %}
{% load humanize %}

{% block content %}

<div class = "jumbotron" style="background-color: white; margin-bottom: 0px; text-align: center;">

    
    <h3 style="color: rgb({{datos.proyecto.color}})">Explosi√≥n de insumos</h3>
    
    <img src="{{datos.proyecto.iamgen.url}}"  class="img-fluid" alt="..." style="max-width:20%;width:auto;height:auto; margin-top: 1rem;">


    <h6 style="text-align: center; color: rgb({{datos.proyecto.color}}) ;">{{datos.proyecto}}</h6>
     
    
    <b><hr class = "my-4" style="width: 75%; border-color:  rgba({{datos.proyecto.color}}, 0.5)"></b>

     <form method="POST" style="text-align: center;">

        {% csrf_token %}

        <div style="display: inline-block; margin-left: 1rem;">

            <label for="palabra"><h6>Buscar</h6></label>

        </div>
        
        <div style="display: inline-block; margin-left: 1rem; ">

            <input name="palabra" type="text" class="form-control form-control" placeholder="Buscar por palabra" list="art" style="width: 30rem;">

        </div>

        <div>
            <button class="btn btn-dark" type="submit" style="margin-top: 1%;">Buscar</button>          
        </div>       

     </form>

     
     <hr class = "my-4" style="width: 100%; border-color: rgba({{datos.proyecto.color}}, 0.5) ;"></b>
    
    
     {% if datos %} 

    <div>

        <table class = "table table-hover" style="text-align: center;">
            <thead>
    
                <tr class = "table-dark">
                    <th scope = "row" style="vertical-align: middle;">ARTICULO</th>
                    <th scope = "row" style="vertical-align: middle;">CANTIDAD PRESUPUESTO</th>
                    <th scope = "row" style="vertical-align: middle;">VALOR </th>
                    <th scope = "row" style="vertical-align: middle;">COMPRADO</th>
                    <th scope = "row" style="vertical-align: middle;">CANTIDAD PENDIENTE</th>
                    <th scope = "row" style="vertical-align: middle;">SALDO </th>            
                </tr>
            </thead>
    
            <tbody>
    
                
    
                {% for i in datos.datos|slice:"30" %}
    
                <tr class = "table-light">
                    <td style="width: 30%;"><b>{{i.0}}</b></td>
                    <td style="width: 15%;"> {{i.1|floatformat:0|intcomma}} ({{i.0.unidad}})</td>
                    <td style="width: 10%;"> ${{i.0.valor|floatformat:0|intcomma}}</td>
                    <td style="width: 15%;"> {{i.2|floatformat:0|intcomma}} ({{i.0.unidad}})</td> 
                    <td style="width: 15%;"> {{i.3|floatformat:0|intcomma}} ({{i.0.unidad}})</td>
                    <td style="width: 15%;"> ${{i.4|floatformat:0|intcomma}}</td>                        
                </tr>
            </tbody>
    
                {% endfor %}
    
            </table>

    </div>

    <hr class = "my-4" style="width: 100%; border-color: rgba({{datos.proyecto.color}}, 0.5) ;"></b>

    <div>
        <small>El listado puede continuar, el maximo de filas visibles es de 30</small>
    </div>

    <hr class = "my-4" style="width: 100%; border-color: rgba({{datos.proyecto.color}}, 0.5) ;"></b>



    <div style="text-align:center">
       <a href= "{% url 'Descarga Exp' id_proyecto=datos.proyecto.id %}" class="btn btn-success" style="margin-top: 1%;" > Descargar Excel</a>          
   </div>  



    <div style="margin-top: 10%;">
        <p> <small>-- Link<strong>P</strong> --</small> </p>

     </div>

    


     {% else %}
            <div>
                <h6>No existe registros actualmente</h6>
            </div>
        
    {% endif %}
        

   
                    
</div>
 
    
{% endblock %}