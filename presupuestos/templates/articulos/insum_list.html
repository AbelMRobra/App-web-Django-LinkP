{% extends "users/inicio.html" %}

{% load static %}

{% block content %}

<div class = "jumbotron" style="background-color: white; margin-bottom: 0px; text-align: center;">

    <h3>Listado de Articulos</h3>
    <h6> <small>Precios actualizados de insumos y servicios</small> </h6>
     <b><hr class = "my-4" style="width: 75%; "></b>

     <form method="POST" style="text-align: center;">

        {% csrf_token %}

        <div style="display: inline-block; margin-left: 1rem;">

            <label for="palabra"><h6>Buscar</h6></label>

        </div>
        
        <div style="display: inline-block; margin-left: 1rem; ">

            <input name="palabra" type="text" class="form-control form-control" placeholder="Buscar por palabra" list="art" style="width: 30rem;">

        </div>
        
        <div>
            <button class="btn btn-dark" type="submit" style="margin-top: 1%;">Buscar</button>          
        </div>       

     </form>
     <b><hr class = "my-4" style="width: 100%;"></b>

    
    {% if datos %} 

    <table class = "table table-hover">
        <thead>

            <tr class = "table-dark">
                <th scope = "row"> <font style = "vertical-align: heredar;"> CODIGO </font></th>
                <th scope = "row"> <font style = "vertical-align: heredar;"> NOMBRE DEL ARTICULO </font></th>
                <th scope = "row"> <font style = "vertical-align: heredar;"> UN </font></th>
                <th scope = "row"> <font style = "vertical-align: heredar;"> VALOR </font></th>
                <th scope = "row"> <font style = "vertical-align: heredar;"> FECHA DE CREACIÓN </font></th>
                <th scope = "row"> <font style = "vertical-align: heredar;"> CONSTANTE </font></th> 
                <th scope = "row"> <font style = "vertical-align: heredar;"> ULTIMA ACTUALIZACIÓN </font></th>
                
            </tr>
        </thead>

        <tbody>

            

            {% for i in datos|slice:"20"  %}
            <tr class = "table-light">
                <td> <b>{{i.codigo}}</b> </td>
                <td>{{i.nombre}}</td>
                <td>{{i.unidad}}</td>
                <td>${{i.valor|floatformat:2}}</td>
                <td>{{i.fecha_c}}</td>
                <td>{{i.constante}}</td>
                <td>{{i.fecha_a}}</td>
                
                
            </tr>

            {% endfor %}
        </tbody>

            

        </table>

     {% else %}
            <div>
                <h3>No hay articulos cargados</h3>
            </div>

    {% endif %}
        

    <b><hr class = "my-4" style="width: 100%;"></b>
    <div>
        <small>El listado puede continuar, el maximo de filas visibles es de 20</small>
    </div>

    {% if perms.articulos.view %}

     <b><hr class = "my-4" style="width: 100%;"></b>

     <div style="margin-bottom: 1rem; text-align: center; margin-top: 0.5 rem;">
        <a href="/presupuestos/insum_panel"><button class="btn btn-success" type="submit">Acceso al panel de cambios</button></a>  
     </div>
      
    {% endif %}

    <div style="margin-top: 2rem;">
        <p> <small>-- Link<strong>P</strong> --</small> </p>

     </div>

                    
</div>
 
    
{% endblock %}